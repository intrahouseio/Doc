### intraHouse-Cherry -  Unreleased
* Исправлена ошибка: при перезагрузке сервера не сохранялся флаг блокировки устройства

### intraHouse-Cherry - v4.7.0 (11.11.19) 
* В таблицу учетных записей добавлено поле Группа, которое будет использоваться для групп информирования по умолчанию.
  Проблема возникала при использовании группового информирования в pushnotification
  
* Добавлена возможность использовать сторонние библиотеки (npm пакеты) в сниппете. Для этого нужно прописать имя пакета в поле  Зависимости сниппета. Пакет будет установлен автоматически.

* Исправлена ошибка, возникающая при редактировании устройства, привязанного к каналу. Ошибка была внесена в версии 4.6.14. Проявляется в сбросе привязки устройства к каналу после любого редактирования этого устройства в таблице устройств (после перезагрузки сервера привязки восстанавливаются).

### intraHouse-Cherry - v4.6.17 (06.11.19) 
* Добавлен Отладчик для сниппета
* Добавлен перезапуск сниппета сразу после редактирования кода и/или периода 
* Исправлена команда set мобильного интерфейса для аналогового актуатора 
* Доработан механизм dbwrite_on (можно передать timestamp для записи текущих параметров) 

### intraHouse-Cherry - v4.6.16 (30.10.19)
* В сниппете добавлен второй аргумент для доступа к объекту global
* Изменен механизм привязки и очистки каналов некоторых плагинов (xiaomi)

### intraHouse-Cherry -  v4.6.15 (25.10.19)
* Исправлена ошибка при подписке на значения для мобильного (передавались данные скрытых устройств)

### intraHouse-Cherry -  v4.6.14 (25.10.19)
* Добавлена возможность в расписании запускать сценарий или действия циклически
* Добавлен механизм сниппетов
* Добавлена возможность создавать сценарии как методы плагина. Плагин должен уметь выполнять сценарии (сервер OPC UA)
* Добавлена возможность в API плагина в списке каналов передавать сразу текущее значение с канала
* Удаление исходников из временной папки после закачки из архива (раньше удаление происходило перед использованием временной папки)
* Удаление в хронологическом порядке ежедневных таблиц БД при превышении заданного объема хранения, если такой объем задан
* Исправлена ошибка при очистке привязки к каналу 
* Исправлена ошибка сценария, который использует индикаторы плагинов как триггеры для запуска

### intraHouse-Cherry -  v4.6.13 (10.09.19)
* В журнале устройства добавлена фиксация, что команда была выполнена посредством  viocecontrol
* Изменения, связанные с генерацией событий при редактировании таблицы Расширения плагинов 

### intraHouse-Cherry -  v4.6.12 (05.09.19)
* В сценариях добавлены функции обратного вызова для execOS и pluginCommand

### intraHouse-Cherry -  v4.6.11 (14.08.19)
* Добавлена возможность скрыть устройство при отображении в мобильном интерфейсе 
* Сортировка списков уровней, подсистем при отображении в мобильном интерфейсе 
* Модификация запроса списка устройств для использования в мобильном интерфейсе 

### intraHouse-Cherry -  v4.6.9 (03.08.19)
* В таблице каналов добавлены столбцы `Значение с канала` и `Время получения`.  Выводится сырое значение 
* В таблице каналов добавлена возможность в целях настройки или отладки записывать значение в канал напрямую (без привязки устройства)
* Расширено API плагинов (работа с устройствами)
* Исправлена ошибка списка счетчиков при настройке графиков и отчетов
* Исправлена ошибка функции сценария isChanged - использовались старые названия свойств 
* Изменен механизм хранения журнала устройства
* Новые запросы для использования в мобильном интерфейсе
* Новый журнал Push Notifications (для использования Push Notifications нужно установить плагин и мобильное приложение)

### intraHouse-Cherry -  v4.6.8 (20.06.19)
* Добавлена возможность из плагина запустить сценарий на сервере
* При отсутствии плагина, включенного в проект, установка выполняется автоматически при запуске сервера
* Добавлены новые опции для виджета Отчет (скрыть заголовок, шапку таблицы;цвета фона, заголовка)
* Добавлена возможность получить данные для отчета и графика с плагина
* Новый формат сообщений (short) для использования в мобильном интерфейсе 

### intraHouse-Cherry -  v4.6.7 (04.06.19)
* Добавлен ступенчатый график
* Изменено отображение цифровых часов для виджета `Часы`
* Добавлена возможность реализовать механизм сессий на уровне сценария, 
  если вызов сценария происходит с кнопки интерфейса
* Добавлена возможность сохранять в таблицы БД дополнительные поля
* Исправлена ошибка обновления интерфейса при интерактивном удалении таблицы БД

### intraHouse-Cherry -  v4.6.6 (21.05.19)
* В новое API плагинов добавлены операции работы с БД 
* Исправлена ошибка компонента Навигатор

### intraHouse-Cherry -  v4.6.5 (20.05.19)
* Добавлена (восстановлена) в PM таблица Общие переменные сценариев 
* Исправлена ошибка в сценариях - использование global без объявления устройств 
* Оптимизирована загрузка устройств при старте сервера
* Добавлена возможность блокировать пункты расписания
* Добавлена возможность передавать параметр сценария в расписании
* Исправлена ошибка в расписании - двойной запуск пункта расписания после редактирования  
* Исправлена ошибка в новом API плагинов для сообщений type:act

### intraHouse-Cherry -  v4.6.4 (29.04.19)
* Исправлены ошибки в блок-схеме (фильтрация устройств, команда плагина)  

### intraHouse-Cherry -  v4.6.2 (26.04.19)
* Исправлена ошибка при запуске сценария - некоторые сценарии могли не запускаться

### intraHouse-Cherry -  v4.6.1 (25.04.19)
* В блоке `Свойство устройства` в блок-схеме добавлены значения ON/OFF
* Исправлена ошибка генерации сценария по блок-схеме при отсутствии триггеров
* Добавлена процедура очистки папки `snapshot` (не более 10 Мб)
* Для виджета `Часы` добавлен шаблон представления `Цифровые`

### intraHouse-Cherry -  v4.6.0 (20.04.19)
* Добавлено новое API плагинов. Новое API будет действовать наряду со старым. 

### intraHouse-Cherry - v4.5.10 (19.04.19)
* Добавлен блок `Свойство устройства` в блок-схеме. 
  В операциях сравнения можно использовать основные и расширенные свойства 
* Добавлен виджет Autocomplete 
* В виджете `Часы` добавлен новый функционал - отображение в текстовом виде 
* Исправлена ошибка, приводящая иногда к лишним срабатываниям сценария  

### intraHouse-Cherry - v4.5.9 (12.04.19)
* Добавлена строковая константа в блок-схеме
* Доработан функционал для отправки команд через телеграм

### intraHouse-Cherry - v4.5.8 (12.04.19)
* Добавлена команда сценария snap для получения снапшота с камер 
* Команда snap доступна в блок-схеме
* Далее снапшот можно отправить получателю (email, telegram). 
  Для реализации этого функционала плагин cctv и плагины информирования нужно обновить!

### intraHouse-Cherry - v4.5.4 (04.04.19)
* Изменения, связанные с CCTV 
* Исправлена ошибка, связанная с отправкой сообщений (email, telegram)
* Исправлена ошибка в графике timeline

### intraHouse-Cherry - v4.5.3 (03.04.19)
* Изменения, связанные с CCTV 
* В сценариях добавлена команда получения лога устройств dev.getLog()
* В сценариях добавлена команда получения исторических данных из БД dbread() (в тестовом режиме)

### intraHouse-Cherry - v4.5.2 (28.03.19)
* Изменен механизм работы CCTV - список камер перенесен в каналы плагина. 
  Камеры будут перенесены при переходе на релиз 4.5 автоматически.
  В виджетах CCTV и связанных с ним навигаторах необходимо заново выбрать списки камер.   
* В таблице Учетные записи добавлена команда "Завершить сессии учетной записи"
  При выполнении команды на всех устройствах, где запускался интерфейс, сбрасываются данные учетной записи, разрешающие вход без ввода пароля. Если интерфейс запущен, появляется форма авторизации. Эти действия выполняются также при изменении пароля и при удалении учетной записи
* Добавлен скрытый ранее столбец ID в таблицах Объекты, Уровни, Помещения, Подсистемы, 
* Добавлена возможность выбора индикатора плагина в мультисценариях (Запуск для устройств). Индикатор плагина - это дискретный датчик. 


### intraHouse-Cherry -  v4.4.18 (07.02.19)
 * Добавлена команда сценария execOS - выполнение консольной команды
 * Команда execOS доступна в блок-схеме
 * Команда http.get доступна в блок-схеме
 * Добавлены столбцы Значение и Время в таблице устройств для просмотра текущего значения устройства
 * В правом меню устройства в основном интерфейсе внизу отображается не полько плагин, но и канал
 * Добавлен флаг для канала "При выполнении команды подтверждения не ждать" для медленных устр и устр без обратной связи 
 * Добавлена возможность развернуть список каналов на весь экран
 * Исправлена ошибка округления до целого для отчетов  

### intraHouse-Cherry -  v4.4.14 (19.01.19)
 * Доработан функционал для управления диммером  
 * Добавлена возможность отправлять команды плагину с кнопки   
 * Добавлен прием сообщения от плагина на запуск сценария 

### intraHouse-Cherry -  v4.4.12 (18.01.19)
 * Добавлен функционал для управления RGB  
 * Доработан функционал для управления диммером  

### intraHouse-Cherry -  v4.4.10 (9.01.19)
 * Исправлена ошибка при запуске сценариев из расписания для фиксированной даты

 * Исправлена ошибка при редактировании в окне Сценарии - Запуск для устройств

### intraHouse-Cherry -  v4.4.9 (29.12.18)
 * Исправлена ошибка при запуске сценариев из расписания - двойной вызов

### intraHouse-Cherry - v4.4.8 (27.12.18)
 * Дополнения в механизме обработки ошибок. Подробнее здесь: https://ih-systems.com/ru/device-errors-resolve/
 * Подготовка к работе с плагином TextToSpeech

### intraHouse-Cherry - v4.4.6 (24.12.18)
 * Добавлен графический редактор сценариев https://ih-systems.com/ru/block-diagram/
 * Исправлена ошибка в расписании.

### intraHouse-Cherry - v4.4.5  (12.12.18)
 * Новое API сценариев https://ih-systems.com/ru/command_list/
   Предыдущее API также остается работоспособным 
 * При изменении языка происходит перезагрузка сервера
 * Добавлена возможность изменять заголовок вкладки и в окне авторизации
 * Исправлена ошибка при входе в одном сеансе с другим логином

### intraHouse-Cherry - v4.4.4  (03.12.18)
  * Исправлено отображение журнала устройств
  * Исправлен скролинг формы авторизации

### intraHouse-Cherry - v4.4.3  (16.11.18)
 * Исправлена ошибка
   - [#91](https://github.com/intrahouseio/intraHouse-Cherry/issues/91) Инверсия актуаторов не работает
 * Доработаны стратегии сохранения данных в БД
   - [#94](https://github.com/intrahouseio/intraHouse-Cherry/issues/94) Сохранение в БД с фильтром за период (наряду с сохранением при изменении с учетом дельты добавлена возможность сохранять выбранное или вычисленное значение за период: среднее, min, max, min&max)  
 * Добавлена реализация концепции smart плагинов. 
     Smart плагин полностью формирует структуру каналов, в том числе иерархическую (parent-child)  
 * Добавлена возможность редактирования таблиц со свойствами parent-child
 * Исправлена проблема с поиском при добавлении устройства
 * Исправлена проблема с закрытием свойств у устройства
 * Исправлено отображение логотипа для Firefox

### intraHouse-Cherry - v4.4.1  (07.11.18)
 * Добавлена возможность отключать родительские стили у виджета `HTML` 
 * Добавлена возможность управлять кешированием изображения `устройства`
 * Добавлен параметр "Отображать точки" для виджета `График`
 * Добавлена возможность скрывать кнопку "Дискрета" для виджета `График`
 * Добавлена возможность размещать виджет `Timeline` на `мнемосхемы` 
 * Добавлены кнопки навигации для виджета `График`и `Timeline` 
 * Добавлена возможность масштабировать кнопки виджетов 
 * Добавлена возможность скрывать графики, нажатием по легенде  
 * Изменена логика размещения легенды 
 * Изменена логика ввода/изменения пароля пользователя 
 * Запоминание экрана при обновлении страницы 
 * Добавлена возможность выравнивания столбцов для виджета `Отчет`

### intraHouse-Cherry - v4.3.11 (29.10.18)
 * Добавлена возможность выводить имя пользователя в UI 
   - [#88](https://github.com/intrahouseio/intraHouse-Cherry/issues/88) Виджет Системная информация - User name
 * Доработаны механизмы разделения доступа пользователей:
   - [#93](https://github.com/intrahouseio/intraHouse-Cherry/issues/93) добавлены режим разработчика и список ролей
   - [#128](https://github.com/intrahouseio/intraHouse-Cherry/issues/128) добавлена возможность определить для пользователя список объектов
   - [#129](https://github.com/intrahouseio/intraHouse-Cherry/issues/129) добавлена возможность определить для пользователя список подсистем, устройствами которых он может управлять
 * Добавлена возможность сортировки в наборе графиков для упорядочивания легенд
   - [#113](https://github.com/intrahouseio/intraHouse-Cherry/issues/128) используется свойство `№ пп` (order)
 * Добавлен новый журнал - подключения пользователей
   - [#130](https://github.com/intrahouseio/intraHouse-Cherry/issues/130) Журнал авторизации в списке журналов

### intraHouse-Cherry - v4.3.10 (19.10.18)
* Добавлена возможность использовать Список мнемосхем в Навигаторе 
* Добавлена возможность загрузки изображений из zip архива
* При копировании отчета, графика - копируется все, включая нижнюю таблицу
* Исправлена ошибка и добавлен функционал в столбчатых графиках (sum, min, max) 

### intraHouse-Cherry - v4.3.9 (18.10.18)
* Исправлена поддержка `javascript` в виджете `HTML`

### intraHouse-Cherry - v4.3.7 (25.09.18)
* Добавлена поддержка `Microsoft EDGE`
* Добавлена поддержка `Safari` на старых устройствах `Ipad/Iphone`
* Авторизация через `query` параметры `username`, `password`, `key`
* Добавлен флаг для скрытия кнопок `Включить`, `Выключить` в меню устройства
* Списки выбора экранов, менмосхем, карт и др. в PM сортируются по названию

### intraHouse-Cherry - v4.3.6 (18.09.18)
* Виджет `CCTV` добавлена обработка ошибки при потери связи
* Виджет `График` исправлено отображение столбчатых данных
* Добавлен виджет `Отчет`
* Добавлена возможность скачивать данные в`PDF` для виджета `Отчет`
* Обновлено поле выбора устройств
* Обновлено отображение журнала в параметрах устройства (долгое нажатие по уcтройству)

### Plugin CCTV - v0.0.11 (17.09.18)
* improved support for `udp` and `rtsp`

### Plugin Xiaomi - v0.0.22 (14.09.18)
* add Plug Base `ctrl_86plug.aq1`
* add Duplex Button `86sw2`
* add Duplex Switch LN `ctrl_ln2.aq1`
* fix gateway herabit

### Plugin Telegram - v0.0.3 (11.09.18)
* add proxy `auto` (search and use public list proxy)
* add proxy `manual` (HTTP/HTTPS)

### intraHouse-Cherry - v4.3.5 (22.08.18)
* Поддержка Windows (pro & scada)
* Добавлено столбчатое отображение для виджета "График"

### intraHouse-Cherry - v4.3.4 (16.08.18)
* Поддержка Windows (lite)

### intraHouse-Cherry - v4.3.1 (10.08.18)
* Добавлена возможность при нажатии на кнопку выполнить несколько команд (запуск сценария, переход на экран, ..)  
* Добавлена возможность автоматического переключения экрана при бездействии в течение заданного времени  
* Добавлена возможность делать запись в БД из сценария
* Добавлена возможность передавать в сценарий параметры (от кнопки, например)
* Исправлена ошибка при добавлении плагина - плагин сразу активируется, если не требуется ключ
* Исправлена ошибка при удалении плагина
* Добавлен тип перехода на зкран (локальный, серверный)

### Plugin CCTV - v0.0.6 (31.07.18)
* Совместимость с виджетом `Навигатор`

### Plugin P2P - v0.0.4 (30.07.18)
* stable version

### intraHouse-Cherry - v4.2.1 (25.07.18)
* Добавлена возможность отката версии системы
* Добавлен механизм локализации плагинов
* В расписании добавлена возможность запуска действий устройств и групповых операций
* Исправлена ошибка - не сохранялась уставка аналоговых устройств при перезагрузке сервера
* Исправлена логика виджета `CCTV`, добавлена возможность переключения через виджет `Навигатор`
* Исправлена ошибка при привязке устройства к каналу

### Plugin Xiaomi - v0.0.19 (24.07.18)
* Sounds control panel

### intraHouse-Cherry - v4.2.0 (16.07.18)
* Добавлен механизм локализации - переключение языка интерфейса. На текущий момент ru и en
* В расписании добавлена возможность запуска на рассвете-закате с +- сдвигом  
* Добавлены системные параметры широта-долгота для работы механизма рассвет-закат
* Добавлено отображение температуры процессора в системной информации
* Добавлен механизм АВТО-РЕАВТО (команды aon/aoff, сброс и восстановление авто при ручном переключении - как в Berry)
* Добавлен отладчик в разделе Рабочие сценарии. Для активного сценария выводятся действующие таймеры и слушатели
* Добавлен виджет `Системная информация`
* Обновлен виджет `Часы`
* Исправлена кнопка синхронизации у виджета `График`
* Исправлен цвет разделителя в свойствах устройства
* Исправлена подписка в свойствах устройства, потеря данных при переключении вкладок
* Добавлена поддержка новой строки у примитива `Текст`

### Plugin MegaD- v1.1.5 (07.07.18)
* В расширении добавлена возможность в ответ на входящий запрос отправлять запрос (возможно, на другой контроллер)

### Plugin Xiaomi - v0.0.17 (06.07.18)
* fix bug multiple gateways

### intraHouse-Cherry - v4.1.28 (14.06.18)
* Исправлено списочное поле выбора
* Исправлена проблема с установкой цвета изобоажения
* Добавлен механизм запуска сценариев по расписанию
* Добавлен журнал устройства
* Добавлены флаги для аналоговых значений вне диапазона (пропускать, ошибка)
* Добавлен механизм составных каналов (состояние, управление - разные каналы, часто исп-ся для импульсного управления)
* Изменен механизм округления аналоговых значений (актуально для импульсных счетчиков)

### intraHouse-Cherry - v4.1.27 (21.05.18)
* Исправлена ошибка сервера при загрузке отсутствующих плагинов

### intraHouse-Cherry - v4.1.26 (18.05.18)
* Добавлена возможность запуска сценария с кнопки интерфейса
* Добавлена возможность выполнить пробный запуск простого сценария при редактировании
* Расширено API сценариев - doAll (групповая операция), assign(прямое присваивание) , info (информирование)
* Добавлена возможность использовать в сценарии реальные устройства напрямую
* Добавлена возможность добавлять устройствам параметры в сценарии и редактировать их через UI  
* Добавлен механизм информирования, отправка тестового сообщения
* Добавлена таблица адресов для информирования
* Добавлена настройка визуализации всплывающих окон
* Добавлены флаги устройства для записи в БД
* Добавлен прогресс выполнения команд плагина
* Добавлен API команд плагинов в манифесте
* Добавлена возможность отразить изображение у устройства
* Добавлен индикатор ошибки для устройства
* Добавлен виджет `График Timeline`
* Добавлен текстовый редактор
* Добавлены алерты в виде всплывающего окна
* Исправлено отображение легенды в виджете `График`

### Plugin P2P - v0.0.2 (14.05.18)
* Новый плагин

### Plugin Ping - v0.0.1 (11.05.18)
* Новый плагин

### Plugin Xiaomi - v0.0.15 (24.04.18)
* add multiple gateways
* plugin commands: add/remove device

### Plugin Xiaomi MiHome - v0.0.14 (03.04.18)
* add Magic Cube `cube`
* add Flood Sensor `sensor_wleak.aq1`

### Plugin Xiaomi - v0.0.12 (29.03.18)
* add Wall Switch `ctrl_neutral1`
* add Wall Switch `ctrl_neutral2`

### Plugin Xiaomi - v0.0.11 (26.03.18)
* add Neutral Wall Switch `ctrl_ln1.aq1`

### intraHouse-Cherry - v4.1.25 (14.03.18)

* Перепривязка устройств на мнемосхеме
* Справочная информация в разделе `Карты`
* Исправлено авто-обновление таблиц
* Добавлен цвет текста заголовка виджета `Журнал`
* Добавлен виджет и примитив `Html`
* Изменена прокрутка сообщений в `Отладчик` консольный режим
* Добавлено управление прокруткой сообщений в `Отладчик` `on/off`
* Добавлена сортировка столбцов виджета `Журнал`
* Исправлено переключение экрана в `Отладчик`
* Добавлена вкладка в каналах: `Дополнительная обработка`
* Добавлен флаг `Инверсия дискретного канала`
* Добавлены атрибуты аналогового устройства - ед. измерения и число знаков после запятой
* Добавлен список журналов
* Добавлена возможность настройки столбцов в журналах и создания новых журналов
